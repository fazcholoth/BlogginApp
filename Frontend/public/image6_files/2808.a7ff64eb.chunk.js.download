(self.webpackChunklite=self.webpackChunklite||[]).push([[2808],{68427:(e,n,i)=>{"use strict";i.d(n,{B:()=>d,R:()=>c});var t=i(8575),a=i(67294),l=i(43487),o=i(78870),d=function(){var e=(0,l.v9)((function(e){return e.navigation.currentLocation})),n=(0,l.v9)((function(e){return e.config.authDomain})),i=(0,o.rp)();return(0,a.useCallback)((function(a){var l=a.id,o=a.domain,d=function(e){var n=e.id,i=e.slug;return i?"/".concat(i):"/c/".concat(n)}({id:l,domain:o,slug:a.slug});if(i)return"https://".concat(n).concat(d);var c=(0,t.parse)(e).port;return o?"https://".concat(o).concat(c?":".concat(c):""):"https://".concat(n).concat(d)}),[i])},c=function(e){return d()(e)}},78757:(e,n,i)=>{"use strict";i.d(n,{P:()=>l});var t=i(68427),a=i(84739),l=function(e){var n=(0,t.B)(),i=(0,a.I)();return"Collection"===e.__typename?n(e):"User"===e.__typename?i(e):""}},84683:(e,n,i)=>{"use strict";i.d(n,{d:()=>o});var t=i(319),a=i.n(t),l=i(68216),o={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"CollectionAvatar_collection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"avatar"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"collectionUrl_collection"}}]}}].concat(a()(l.nf.definitions))}},71652:(e,n,i)=>{"use strict";i.d(n,{v:()=>u});var t=i(67294),a=i(68427),l=i(14818),o=i(4381),d=i(27323),c=i(29746),r=i(46696),m=function(e){return function(n){return{borderRadius:(0,c.a)(n.borderRadius.regular),width:(0,c.a)(e),height:(0,c.a)(e)}}},u=function(e){var n=e.circular,i=e.collection,c=e.size,u=void 0===c?60:c,s=e.link,k=(0,a.R)(i);if(!i||!i.avatar||!i.avatar.id)return null;var v=i.avatar.id,S=i.name||"Publication avatar",N=n?t.createElement(l.z,{miroId:v,alt:S,diameter:u,freezeGifs:!1}):t.createElement(o.UV,{rules:[m(u)],miroId:v,alt:S,width:u,height:u,strategy:r._S.Crop});return s?t.createElement(d.P,{href:k},N):N}},19308:(e,n,i)=>{"use strict";i.d(n,{b:()=>d,I:()=>c});var t=i(319),a=i.n(t),l=i(68216),o=i(98007),d={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"CollectionFollowButton_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}}]}}]},c={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"CollectionFollowButton_collection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"FragmentSpread",name:{kind:"Name",value:"collectionUrl_collection"}},{kind:"FragmentSpread",name:{kind:"Name",value:"SusiClickable_collection"}}]}}].concat(a()(l.nf.definitions),a()(o.Os.definitions))}},82405:(e,n,i)=>{"use strict";i.d(n,{F:()=>w});var t=i(63038),a=i.n(t),l=i(21919),o=i(67294),d=i(5977),c=i(77520),r=i(20297),m=i(25550),u=i(25267),s=i(39727),k=i(26350),v=i(50563),S=i(93310),N=i(77355),f=i(47230),p=i(18627),g=i(66411),F=i(92661),C=i(43487),y=i(50458),w=function(e){var n,i=e.buttonSize,t=e.buttonStyleFn,y=e.collection,w=e.post,_=e.simpleLink,D=e.susiEntry,E=void 0===D?"follow_card":D,T=e.preventParentClick,I=(0,C.v9)((function(e){return e.config.authDomain})),h=(0,m.r)().viewerId,U=(0,p.A)(),V=(0,g.pK)(),O=(0,d.TH)(),R=(0,F.$B)(O.pathname),B=null==R||null===(n=R.route)||void 0===n?void 0:n.name,z=(0,s.g)(y),A=z.viewerEdge,P=z.loading,q=function(e,n){var i=(0,l.D)(r.e),t=a()(i,1)[0];return o.useCallback((function(){return t({variables:{id:e.id},optimisticResponse:{followCollection:{__typename:"Collection",id:e.id,name:e.name,viewerEdge:{__typename:"CollectionViewerEdge",id:"collectionId:".concat(e.id,"-viewerId:").concat(n),isFollowing:!0}}},update:function(i){i.modify({id:"User:".concat(n),fields:{missionControl:(0,v.im)("followedCollections",!0),followingCollectionConnection:(0,v.Hc)(e.id)}})}})}),[e.id])}(y,h),x=function(e,n){var i=(0,l.D)(r.X),t=a()(i,1)[0];return o.useCallback((function(){return t({variables:{id:e.id},optimisticResponse:{unfollowCollection:{__typename:"Collection",id:e.id,name:e.name,viewerEdge:{__typename:"CollectionViewerEdge",id:"collectionId:".concat(e.id,"-viewerId:").concat(n),isFollowing:!1}}},update:function(e){e.modify({id:"User:".concat(n),fields:{missionControl:(0,v.im)("followedCollections",!1)}})}})}),[e.id])}(y,h),G=o.useCallback((function(e){T&&e.preventDefault(),U.event("collection.followed",{collectionId:y.id,followSource:V}),q()}),[y,T,V,U]),L=o.useCallback((function(e){T&&e.preventDefault(),U.event("collection.unfollowed",{collectionId:y.id,followSource:V}),x()}),[T,V,U]),H=!(null==A||!A.isFollowing),M=t?t(!!H):H?"OBVIOUS":"STRONG";return _?o.createElement(S.r,{onClick:H?L:G},o.createElement(N.x,{display:"flex",flexDirection:"row"},H?"Unfollow publication":"Follow publication")):o.createElement(u.I,null,(function(e){return e?o.createElement(f.zx,{size:i,onClick:H?L:G,buttonStyle:M,loading:P},H?"Following":"Follow"):o.createElement(k.R,{collection:y,buttonStyle:H?"OBVIOUS":"STRONG",isButton:!0,buttonSize:"REGULAR",operation:"register",actionUrl:b(I,y,w)||"",susiEntry:E,pageSource:(0,c.x)(B,"register")},H?"Following":"Follow")}))},b=function(e,n,i){return n.slug&&(i&&i.id?(0,y.TA)(e,n.slug,i.id):(0,y.Ll)(e,n.slug))}},39727:(e,n,i)=>{"use strict";i.d(n,{g:()=>o});var t=i(64718),a=i(319),l={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"CollectionViewerEdge"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"collectionId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"collection"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"collectionId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Collection_viewerEdge"}}]}}]}}]}}]}}].concat(i.n(a)()([{kind:"FragmentDefinition",name:{kind:"Name",value:"Collection_viewerEdge"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"CollectionViewerEdge"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"canEditOwnPosts"}},{kind:"Field",name:{kind:"Name",value:"canEditPosts"}},{kind:"Field",name:{kind:"Name",value:"isEditor"}},{kind:"Field",name:{kind:"Name",value:"isFollowing"}},{kind:"Field",name:{kind:"Name",value:"isMuting"}},{kind:"Field",name:{kind:"Name",value:"isSubscribedToLetters"}},{kind:"Field",name:{kind:"Name",value:"isSubscribedToMediumNewsletter"}},{kind:"Field",name:{kind:"Name",value:"isSubscribedToEmails"}},{kind:"Field",name:{kind:"Name",value:"isWriter"}}]}}]))},o=function(e){var n,i,a=(0,t.a)(l,{variables:{collectionId:null!==(n=null==e?void 0:e.id)&&void 0!==n?n:""},ssr:!1,skip:!(null!=e&&e.id)}),o=a.loading,d=a.error,c=a.data;return o?{loading:o}:d?{error:d}:{viewerEdge:null==c||null===(i=c.collection)||void 0===i?void 0:i.viewerEdge}}},25267:(e,n,i)=>{"use strict";i.d(n,{I:()=>a});var t=i(6443),a=function(e){var n=e.children,i=e.nonBlocking,a=(0,t.H)(),l=a.error,o=a.loading,d=a.value;return i&&(l||o)?n(null):o?null:n(d)}},98007:(e,n,i)=>{"use strict";i.d(n,{Os:()=>o,qU:()=>d,Vm:()=>c,GB:()=>r});var t=i(319),a=i.n(t),l=i(20121),o={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"SusiClickable_collection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"SusiContainer_collection"}}]}}].concat(a()(l.Hr.definitions))},d={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"SusiClickable_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"mediumUrl"}},{kind:"FragmentSpread",name:{kind:"Name",value:"SusiContainer_post"}}]}}].concat(a()(l.qt.definitions))},c=([{kind:"FragmentDefinition",name:{kind:"Name",value:"SusiClickable_topic"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Topic"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"SusiContainer_topic"}}]}}].concat(a()(l.Uh.definitions)),{kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"SusiClickable_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"SusiContainer_user"}}]}}].concat(a()(l.Zd.definitions))}),r={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"SusiClickable_newsletterV3"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"NewsletterV3"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"SusiContainer_newsletterV3"}}]}}].concat(a()(l.gs.definitions))};[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"SusiClickableAccountTokenQuery"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"SusiContainer_query"}}]}}].concat(a()(l.Zz.definitions))},27048:(e,n,i)=>{"use strict";i.d(n,{W:()=>o});var t=i(319),a=i.n(t),l=i(68216),o={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"UserAvatar_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"imageId"}},{kind:"Field",name:{kind:"Name",value:"mediumMemberAt"}},{kind:"Field",name:{kind:"Name",value:"membership"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"tier"}}]}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"username"}},{kind:"FragmentSpread",name:{kind:"Name",value:"userUrl_user"}}]}}].concat(a()(l.$m.definitions))}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/2808.a7ff64eb.chunk.js.map