(self.webpackChunklite=self.webpackChunklite||[]).push([[9128],{32378:(e,t,n)=>{"use strict";n.r(t),n.d(t,{RedeemGiftMembershipModal:()=>M});var a=n(63038),r=n.n(a),i=n(67294),l=n(38194),o=n(73178),m=n(13791),c=n(18627),u=n(66411),s=n(92661),d=n(77280),p=n(43487),x=n(77355),g=n(47230),f=n(93310),h=n(54945),E=n(87691),b=function(e){var t=e.close,n=(0,s.qt)("ShowLiteGiftCheckout",{}),a=(0,p.v9)((function(e){return e.config.productName}));return i.createElement(x.x,{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",maxWidth:"580px"},i.createElement(h.H2,{tag:"h1",scale:"XL"},"Welcome to your ",a," membership."),i.createElement(x.x,{marginTop:"20px"},i.createElement(E.F,{scale:"L",color:"DARKER"},"Click the button below to start enjoying your membership access! Happy reading!")),i.createElement(x.x,{marginTop:"40px"},i.createElement(g.zx,{buttonStyle:"BRAND",onClick:t},"Start reading")),i.createElement(x.x,{marginTop:"40px",marginBottom:"35px"},i.createElement(E.F,{tag:"span",scale:"L",color:"DARKER"},"Want to pay it forward? Click"," ",i.createElement(f.r,{href:n,linkStyle:"OBVIOUS",inline:!0,target:"_blank"},"here")," ","to purchase a gift membership")))},y=n(21919),k=n(6443),v=n(40201),S=n(50458),R=function(e){var t=e.errorType;return"BadRequest"===t?i.createElement(x.x,null,i.createElement(E.F,{scale:"S",color:"ERROR"},"You have entered an invalid code. Please try again or"," ",i.createElement(f.r,{href:S.B$,inline:!0,linkStyle:"OBVIOUS"},"contact customer support")," ","if you’ve tried multiple times.")):"TooManyRequests"===t?i.createElement(x.x,null,i.createElement(E.F,{scale:"S",color:"ERROR"},"You have reached your maximum number of redemption attempts. Please wait and try again, or"," ",i.createElement(f.r,{href:S.B$,inline:!0,linkStyle:"OBVIOUS"},"contact customer support."))):null},C={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"userRedeemGiftMembershipMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"giftCode"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userRedeemGiftMembership"},arguments:[{kind:"Argument",name:{kind:"Name",value:"giftCode"},value:{kind:"Variable",name:{kind:"Name",value:"giftCode"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]}}]},T=function(e){var t=e.close;return i.createElement(i.Fragment,null,i.createElement(x.x,{textAlign:"center",marginBottom:"30px"},i.createElement(E.F,{color:"DARKER",scale:"M"},"Gift codes cannot be applied to existing Medium memberships. You can redeem your gift at the end of your current membership term.",i.createElement("br",null),i.createElement("br",null),"To prevent future rollover charges, cancel your current subscription and save your gift code. (You’ll keep full access to Medium until the end of your current membership term.) Your gift code will be redeemable on your previously scheduled renewal date.",i.createElement("br",null),i.createElement("br",null),"Need help?"," ",i.createElement(f.r,{href:S.g2,inline:!0,linkStyle:"OBVIOUS"},"Click here for detailed instructions"),".")),i.createElement(x.x,{textAlign:"center",marginBottom:"30px"},i.createElement(g.zx,{buttonStyle:"STRONG",size:"LARGE",onClick:t},"Ok")))};function B(e){return e.toLowerCase().replace(/\s/g,"")}var w=/^[a-z\d]{25}$/,A=/^[a-z\d]{26}$/,L=function(e){var t=e.giftCode,n=e.giftType,a=e.showConfirmationStep,l=e.close,m=((0,k.H)().value||{}).mediumMemberAt,c=(0,p.v9)((function(e){return e.config.productName})),u=function(e){return e?e.replace(/\s/g,"").replace(/(.{5})(?=.)/g,"$1 "):""},s=i.useState(u(t)),d=r()(s,2),b=d[0],L=d[1],O=i.useState(!t),M=r()(O,2),D=M[0],N=M[1],G=i.useState(""),F=r()(G,2),V=F[0],H=F[1],I=(0,y.D)(C,{onCompleted:function(e){var t=e.userRedeemGiftMembership,n=null==t?void 0:t.__typename;"GiftMembershipRedeemed"===n?(H(""),a()):"TooManyRequests"===n?(H("TooManyRequests"),N(!1)):(H("BadRequest"),N(!1))}}),z=r()(I,1)[0],q=i.useCallback((function(e){var t,n=u(e.target.value);L(n),t=B(n),w.test(t)||A.test(t)?N(!1):N(!0)}),[]);return i.createElement(x.x,{margin:"0 auto",sm:{width:"100%",paddingTop:"10px",textAlign:"left"}},i.createElement(x.x,{textAlign:"center",sm:{textAlign:"left"},marginBottom:"48px",marginTop:"48px"},i.createElement(x.x,{margin:"0 auto",sm:{width:"100%",textAlign:"center"},marginTop:"48px",marginBottom:"8px"},i.createElement(h.H2,{tag:"h1",scale:{xs:"L",sm:"L",md:"XL",lg:"XL",xl:"XL"}},m?"It looks like you are already a ".concat(c," member."):"Redeem your gift for unlimited reading."))),i.createElement(x.x,{tag:"form",display:"block",paddingLeft:"30px",paddingRight:"30px",margin:"0",sm:{width:"100%"}},m?i.createElement(T,{close:l}):i.createElement(x.x,{textAlign:"center"},i.createElement(x.x,{marginBottom:"24px"},i.createElement(E.F,{scale:"S",color:"DARKER"},"To start your membership, enter your redemption code below.")),i.createElement(x.x,{marginBottom:"40px",padding:"0 5px"},i.createElement(x.x,{maxWidth:"440px",marginBottom:"10px",marginLeft:"auto",marginRight:"auto"},i.createElement(v.n,{onChange:q,value:b,scale:"L",placeholder:"xxxxx xxxxx xxxxx xxxxx xxxxx",characterCountLimit:o.eh[n]})),i.createElement(x.x,null,i.createElement(R,{errorType:V}))),i.createElement(x.x,{marginLeft:"auto",marginRight:"auto"},i.createElement(x.x,null,i.createElement(g.zx,{disabled:D,onClick:function(e){e.preventDefault(),N(!0),z({variables:{giftCode:B(b)}})},buttonStyle:"STRONG",size:"LARGE"},"Start my membership")),i.createElement(x.x,{paddingTop:"10px",paddingBottom:"20px",display:"block"},i.createElement(E.F,{scale:"S",color:"DARKER"},"By clicking “Start my membership,” you agree to"),i.createElement(E.F,{scale:"S",color:"DARKER"},"our"," ",i.createElement(f.r,{href:S.OL,inline:!0,linkStyle:"OBVIOUS"},"Membership Terms of Service"),"."))))))},O=n(98107),M=function(e){var t=e.isDialogVisible,n=e.hide,a=(0,o.lJ)((0,d.Wd)("giftType")),x=(0,d.Wd)("giftCode")||"",g=(0,p.v9)((function(e){return e.config.authDomain})),f=(0,c.A)(),h=(0,u.Lk)(),E=(0,s.H2)(),y=i.useState(!1),k=r()(y,2),v=k[0],S=k[1],R=(0,l.M)(O.U),C=R.setHash,T=R.removeHash,B=i.useCallback((function(){S(!1),T(),n()}),[n,T]),w=i.useCallback((function(){T(),window.location.href=E("ShowHome",{})}),[g,T,E]),A=i.useCallback((function(){S(!0)}),[]);return i.useEffect((function(){t&&C()}),[C,t]),i.useEffect((function(){t&&f.event("liteGiftMembershipRedeemPage.viewed",{dimension:h&&h.dimension,locationId:h&&h.dimension})}),[t]),i.createElement(m.v,{isVisible:t,hide:v?w:B,withCloseButton:!0,confirmText:"",showCancelButton:!1,hideOnConfirm:!1},!v&&i.createElement(L,{giftCode:x,giftType:a,showConfirmationStep:A,close:B}),v&&i.createElement(b,{close:w}))}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/RedeemGiftMembershipModal.1336737f.chunk.js.map